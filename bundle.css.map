{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "Confirm.svelte",
    "IconBase.svelte",
    "App.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { fly, fade } from 'svelte/transition'\n  export let themeColor = 200\n  export let confirmTitle = 'Confirm'\n  export let cancelTitle = 'Cancel'\n\n  let showDialog = false\n  let functionToCall = {\n    func: null,\n    args: null\n  }\n\n  function callFunction () {\n    showDialog = false\n    functionToCall['func'](...functionToCall['args'])\n  }\n\n  function confirm (func, ...args) {\n    functionToCall = {func, args}\n    showDialog = true\n  }\n</script>\n\n<slot confirm={confirm}></slot>\n\n{#if showDialog}\n  <div\n    class=\"overlay\"\n    in:fade=\"{{ duration: 200 }}\"\n    out:fade=\"{{ delay: 200, duration: 200 }}\"\n  ></div>\n  <div\n    class=\"confirm-dialog\"\n    in:fly=\"{{\n      y: -10,\n      delay: 200,\n      duration: 200\n    }}\"\n    out:fly=\"{{\n      y: -10,\n      duration: 200\n    }}\"\n  >\n    <div class=\"message-section\">\n      <span class=\"message-title\">\n        <slot name=\"title\">\n          Are you sure you want to perform this action?\n        </slot>\n      </span>\n      <span class=\"message-description\">\n        <slot name=\"description\">\n          This action can't be undone!\n        </slot>\n      </span>\n    </div>\n    <div\n      class=\"actions\"\n      style=\"background: hsl({themeColor}, 30%, 97%)\"\n    >\n      <button\n        class=\"cancel-button\"\n        style=\"\n          --cancel-btn-color: hsl({themeColor}, 40%, 50%);\n          --cancel-btn-color-hover: hsl({themeColor}, 40%, 55%);\n        \"\n        on:click=\"{() => showDialog = false }\"\n      >\n        <slot name=\"cancel\">\n          {cancelTitle}\n        </slot>\n      </button>\n      <button\n        class=\"confirm-button\"\n        style=\"\n          --confirm-btn-bg: hsl({themeColor}, 40%, 50%);\n          --confirm-btn-bg-hover: hsl({themeColor}, 40%, 55%);\n        \"\n        on:click=\"{callFunction}\"\n      >\n        <slot name=\"confirm\">\n          {confirmTitle}\n        </slot>\n      </button>\n    </div>\n  </div>\n{/if}\n\n<style>\n.message-title {\n  font-size: 22px;\n  font-weight: 500;\n  display: block;\n  color: hsl(0, 0%, 20%);\n  line-height: 1.2;\n}\n\n.message-description {\n  display: block;\n  margin-top: 20px;\n  font-size: 16px;\n  color: hsl(0, 0%, 30%);\n  line-height: 1.4;\n}\n\n.actions {\n  display: flex;\n  justify-content: flex-end;\n  margin: 25px -40px -30px;\n  padding: 15px 20px;\n  border-radius: 0 0 3px 3px;\n}\n\n.confirm-dialog {\n  font-family: sans-serif;\n  position: absolute;\n  z-index: 999;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  padding: 30px 40px;\n  border-radius: 3px;\n  background: #FFF;\n  max-width: 500px;\n  width: calc(100% - 20px);\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n}\n\n.overlay {\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  user-select: none;\n  z-index: 998;\n  background: hsla(0, 0%, 0%, 80%);\n}\n\n.confirm-button {\n  background: hsl(200, 40%, 50%);\n  background: var(--confirm-btn-bg);\n  margin-left: 10px;\n  border: none;\n  outline: none;\n  border-radius: 2px;\n  padding: 10px 15px;\n  cursor: pointer;\n  font-size: 16px;\n  color: hsl(0, 0%, 95%);\n  transition: all 0.3s cubic-bezier(.25, .8, .25, 1);\n}\n\n.confirm-button:hover {\n  background: hsl(200, 40%, 55%);\n  background: var(--confirm-btn-bg-hover);\n}\n\n.cancel-button {\n  border: none;\n  outline: none;\n  background: transparent;\n  padding: 5px 10px;\n  cursor: pointer;\n  font-size: 16px;\n  color: hsl(200, 40%, 50%);\n  color: var(--cancel-btn-color);\n  transition: all 0.3s cubic-bezier(.25, .8, .25, 1);\n}\n\n.cancel-button:hover {\n  color: hsl(200, 40%, 55%);\n  color: var(--cancel-btn-color-hover);\n}\n</style>\n",
    "<script>\n  export let title = null;\n  export let viewBox;\n</script>\n\n<style>\n  svg {\n    stroke: currentColor;\n    fill: currentColor;\n    stroke-width: 0;\n    width: 100%;\n    height: auto;\n    max-height: 100%;\n  }  \n</style>\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" {viewBox}>\n  {#if title}\n    <title>{title}</title>\n  {/if}\n  <slot />\n</svg>\n",
    "<script>\n\timport { onDestroy, onMount } from \"svelte\";\n\timport { Confirm } from \"svelte-confirm\";\n\timport IoIosShare from \"svelte-icons/io/IoIosShare.svelte\";\n\timport IoIosVolumeOff from \"svelte-icons/io/IoIosVolumeOff.svelte\";\n\timport IoIosVolumeHigh from \"svelte-icons/io/IoIosVolumeHigh.svelte\";\n\timport IoMdEyeOff from \"svelte-icons/io/IoMdEyeOff.svelte\";\n\timport IoMdEye from \"svelte-icons/io/IoMdEye.svelte\";\n\timport IoIosExpand from \"svelte-icons/io/IoIosExpand.svelte\";\n\timport IoMdCall from \"svelte-icons/io/IoMdCall.svelte\";\n\timport IoMdSwap from \"svelte-icons/io/IoMdSwap.svelte\";\n\t/**\n\t * TODO:\n\t * make sure all resources are closed when disconnecting - volumenode and screensharing\n\t * display symbol on muted\n\t */\n\n\tlet token = null;\n\tlet roomname = null;\n\tlet joinPromise = null;\n\tlet room = null;\n\tlet mainStream = null;\n\tlet mainStreamId = null;\n\tlet mainStreamPinned = false;\n\n\tlet audioDirectory = \"/wp-content/plugins/BuddyBoss-Video/\";\n\tlet joinCallAudio = new Audio(audioDirectory + \"startcall.mp3\");\n\tlet endCallAudio = new Audio(audioDirectory + \"endcall.mp3\");\n\tlet buttonClickAudio = new Audio(audioDirectory + \"click.mp3\");\n\n\tlet localStream = {\n\t\tid: null,\n\t\tvideoStream: null,\n\t\taudioStream: null,\n\t\tscreenStream: null,\n\t};\n\tlet streams = [];\n\tlet muted = false;\n\tlet videoHidden = false;\n\tlet volumes = {};\n\tlet remoteMuted = {};\n\n\tfunction reset() {\n\t\tjoinPromise = null;\n\t\troom = null;\n\t\tmainStreamId = null;\n\t\tmainStream = null;\n\t\tmainStreamPinned = false;\n\t\tlocalStream.id = null;\n\t\tlocalStream.videoStream = null;\n\t\tlocalStream.audioStream = null;\n\t\tif (localStream.screenStream != null) {\n\t\t\tlocalStream.screenStream.stop();\n\t\t\tlocalStream.screenStream = null;\n\t\t}\n\t\tstreams = [];\n\t\tmuted = false;\n\t\tvideoHidden = false;\n\t\tvolumes = {};\n\t}\n\n\tsetInterval(decideMainStream, 1000);\n\n\tconst volumeNodeSource =\n\t\t\"/wp-content/plugins/BuddyBoss-Video/volumeprocessor.js\";\n\t// \"volumeprocessor.js\";\n\tlet audioContext = null;\n\n\tonDestroy(() => {\n\t\tif (room != null) {\n\t\t\troom.disconnect();\n\t\t}\n\t});\n\n\tonMount(async () => {\n\t\tconsole.log(\"onload\");\n\t\tif (token == null)\n\t\t\ttoken = document.getElementById(\"video-user-token\").value;\n\t\tif (roomname == null)\n\t\t\troomname = document.getElementById(\"video-room\").value;\n\t});\n\n\tfunction createVolumeNode(label) {\n\t\tlet volumeNode = new AudioWorkletNode(audioContext, \"volume-processor\");\n\t\tvolumeNode.port.onmessage = (event) => {\n\t\t\tif (event.data.volume) {\n\t\t\t\tif (!isNaN(event.data.volume) && label)\n\t\t\t\t\tvolumes[label] = event.data.volume;\n\t\t\t}\n\t\t};\n\t\treturn volumeNode;\n\t}\n\n\tfunction initialize() {\n\t\tif (audioContext == null) {\n\t\t\taudioContext = new AudioContext();\n\t\t\taudioContext.audioWorklet\n\t\t\t\t.addModule(volumeNodeSource)\n\t\t\t\t.then(initializeRoom)\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t});\n\t\t} else {\n\t\t\tinitializeRoom();\n\t\t}\n\t}\n\n\tfunction initializeRoom() {\n\t\tif (token == null || roomname == null || window.Twilio == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst connect = window.Twilio.Video.connect;\n\n\t\tjoinPromise = connect(token, {\n\t\t\tname: roomname,\n\t\t\taudio: true,\n\t\t\tvideo: { width: 640 },\n\t\t});\n\n\t\tjoinPromise.then((_room) => {\n\t\t\troom = _room;\n\t\t\tconsole.log(`Successfully joined a Room: ${room}`);\n\t\t\tlocalStream.id = room.localParticipant.identity;\n\t\t\tlocalStream.videoStream = room.localParticipant.videoTracks\n\t\t\t\t.values()\n\t\t\t\t.next().value.track.mediaStreamTrack;\n\t\t\tlocalStream.audioStream = room.localParticipant.audioTracks\n\t\t\t\t.values()\n\t\t\t\t.next().value.track.mediaStreamTrack;\n\t\t\tlocalStream.volumeNode = createVolumeNode(\n\t\t\t\tlocalStream.id,\n\t\t\t\tlocalStream.audioStream\n\t\t\t);\n\n\t\t\tvolumes[localStream.id] = 0;\n\n\t\t\troom.participants.forEach(addParticipant);\n\t\t\troom.on(\"participantConnected\", addParticipant);\n\t\t\troom.on(\"participantDisconnected\", removeParticipant);\n\n\t\t\troom.on(\"disconnected\", (room) => {\n\t\t\t\tconsole.log(\"disconnected\");\n\t\t\t\treset();\n\t\t\t});\n\n\t\t\troom.on(\"trackSubscribed\", (track, publication, part) => {\n\t\t\t\tconsole.log(\"trackSubscribed: \", part);\n\t\t\t\tupdateStream(part);\n\t\t\t});\n\t\t\troom.on(\"trackPublished\", (publication, part) => {\n\t\t\t\tconsole.log(\"trackPublished: \", part);\n\t\t\t\tupdateStream(part);\n\t\t\t});\n\t\t\troom.on(\"trackUnsubscribed\", (track, publication, part) => {\n\t\t\t\tconsole.log(\"trackUnsubscribed: \", part);\n\t\t\t\tif (publication.kind === \"audio\") {\n\t\t\t\t\tremoveAudioStream(part);\n\t\t\t\t} else {\n\t\t\t\t\tupdateVideoStream(part);\n\t\t\t\t}\n\t\t\t});\n\t\t\troom.on(\"trackUnpublished\", (publication, part) => {\n\t\t\t\tconsole.log(\"trackUnpublished: \", part);\n\t\t\t\tif (publication.kind === \"audio\") {\n\t\t\t\t\taddAudioStream(part);\n\t\t\t\t} else {\n\t\t\t\t\tupdateVideoStream(part);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\troom.on(\"trackDisabled\", (publication, part) => {\n\t\t\t\tif (publication.kind === \"audio\")\n\t\t\t\t\tremoteMuted[part.identity] = true;\n\n\t\t\t\tconsole.log(\"trackDisabled: \", publication.kind, part.identity);\n\t\t\t});\n\t\t\troom.on(\"trackEnabled\", (publication, part) => {\n\t\t\t\tif (publication.kind === \"audio\")\n\t\t\t\t\tremoteMuted[part.identity] = false;\n\n\t\t\t\tconsole.log(\"trackEnabled: \", publication.kind, part.identity);\n\t\t\t});\n\t\t\troom.on(\"trackSwitchedOff\", (track, publication, part) => {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"trackSwitchedOff: \",\n\t\t\t\t\tpublication.kind,\n\t\t\t\t\tpart.identity\n\t\t\t\t);\n\t\t\t});\n\t\t\troom.on(\"trackSwitchedOn\", (track, publication, part) => {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"trackSwitchedOn: \",\n\t\t\t\t\tpublication.kind,\n\t\t\t\t\tpart.identity\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction toggleMute() {\n\t\tbuttonClickAudio.play();\n\t\troom.localParticipant.audioTracks.forEach((track) => {\n\t\t\tmuted = !muted;\n\t\t\tif (muted) track.track.disable();\n\t\t\telse track.track.enable();\n\t\t});\n\t}\n\n\tfunction toggleVideo() {\n\t\tbuttonClickAudio.play();\n\t\troom.localParticipant.videoTracks.forEach((track) => {\n\t\t\tvideoHidden = !videoHidden;\n\t\t\tif (videoHidden) track.track.disable();\n\t\t\telse track.track.enable();\n\t\t});\n\t}\n\n\tfunction shareScreen() {\n\t\tbuttonClickAudio.play();\n\t\tif (localStream.screenStream == null) {\n\t\t\tnavigator.mediaDevices.getDisplayMedia().then((stream) => {\n\t\t\t\tlocalStream.screenStream = stream.getTracks()[0];\n\t\t\t\troom.localParticipant.publishTrack(\n\t\t\t\t\tnew window.Twilio.Video.LocalVideoTrack(\n\t\t\t\t\t\tlocalStream.screenStream\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\t\t} else {\n\t\t\troom.localParticipant.unpublishTrack(localStream.screenStream);\n\t\t\tlocalStream.screenStream.stop();\n\t\t\tlocalStream.screenStream = null;\n\t\t}\n\t}\n\n\tfunction endCall() {\n\t\tif (room == null) {\n\t\t\tinitializeRoom();\n\t\t} else {\n\t\t\troom.disconnect();\n\t\t\tendCallAudio.play();\n\t\t\treset();\n\t\t}\n\t}\n\n\tfunction updateVideoStream(participant) {\n\t\tfor (const elem of streams) {\n\t\t\tif (elem.id == participant.identity) {\n\t\t\t\telem.audioStreams = Array.from(participant.audioTracks.values())\n\t\t\t\t\t.filter((x) => x.track != null)\n\t\t\t\t\t.map((x) => x.track.mediaStreamTrack);\n\t\t\t\tif (elem.audioStreams.length >= 1 && elem.volumeNode == null) {\n\t\t\t\t\telem.volumeNode = createVolumeNode(\n\t\t\t\t\t\telem.id,\n\t\t\t\t\t\telem.audioStreams[0]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telem.videoStreams = Array.from(participant.videoTracks.values())\n\t\t\t\t\t.filter((x) => x.track != null)\n\t\t\t\t\t.map((x) => x.track.mediaStreamTrack);\n\t\t\t\tconsole.log(elem.audioStreams, elem.videoStreams);\n\t\t\t}\n\t\t}\n\t\tstreams = streams;\n\t}\n\n\tfunction addAudioStream(participant) {\n\t\tfor (const elem of streams) {\n\t\t\tif (elem.id == participant.identity) {\n\t\t\t\telem.audioStreams = Array.from(participant.audioTracks.values())\n\t\t\t\t\t.filter((x) => x.track != null)\n\t\t\t\t\t.map((x) => x.track.mediaStreamTrack);\n\t\t\t\tif (elem.audioStreams.length >= 1 && elem.volumeNode == null) {\n\t\t\t\t\telem.audioOutput = audioContext.createMediaStreamSource(\n\t\t\t\t\t\telem.audioStreams\n\t\t\t\t\t);\n\t\t\t\t\telem.volumeNode = createVolumeNode(elem.id);\n\t\t\t\t\telem.audioOutput.connect(elem.volumeNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tstreams = streams;\n\t}\n\n\tfunction removeAudioStream(participant) {\n\t\tfor (const elem of streams) {\n\t\t\tif (elem.id == participant.identity) {\n\t\t\t\telem.audioOutput.disconnect();\n\t\t\t\telem.audioOutput = null;\n\t\t\t\telem.volumeNode.port.postMessage({ msg: \"end\" });\n\t\t\t\telem.volumeNode.port.onmessage = null;\n\t\t\t\telem.volumeNode = null;\n\t\t\t\telem.audioStreams = [];\n\t\t\t}\n\t\t}\n\t\tstreams = streams;\n\t}\n\n\tfunction addParticipant(participant) {\n\t\tconsole.log(\"addParticipant\", participant);\n\t\tvar data = {\n\t\t\tid: participant.identity,\n\t\t\tparticipant: participant,\n\t\t\tvideoStreams: [],\n\t\t\taudioStreams: [],\n\t\t};\n\t\tvolumes[data.id] = 0;\n\t\tstreams = [...streams, data];\n\t\tupdateStream(participant);\n\t\tjoinCallAudio.play();\n\t}\n\n\tfunction removeParticipant(participant) {\n\t\tstreams = streams.filter((e) => e.id != participant.identity);\n\t}\n\n\tfunction decideMainStream() {\n\t\tif (room == null) {\n\t\t\treturn;\n\t\t}\n\t\tif (mainStreamPinned) {\n\t\t\treturn;\n\t\t}\n\t\tlet maxVolume = 0;\n\t\tlet maxId = null;\n\t\tfor (const id in volumes) {\n\t\t\tif (id == room.localParticipant.identity) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (volumes.hasOwnProperty(id)) {\n\t\t\t\tconst v = volumes[id];\n\t\t\t\tif (maxId == null || v > maxVolume) {\n\t\t\t\t\tmaxId = id;\n\t\t\t\t\tmaxVolume = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (maxId == null) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const elem of streams) {\n\t\t\tif (elem.id == maxId) {\n\t\t\t\tif (elem.videoStreams == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (elem.videoStreams.length == 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (mainStream != null) {\n\t\t\t\t\tif (mainStream.label == elem.videoStreams[0].label) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmainStreamId = maxId;\n\t\t\t\tmainStream = elem.videoStreams[0].clone();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction srcObject(node, streams) {\n\t\tif (streams != null) {\n\t\t\tstreams = Array.isArray(streams)\n\t\t\t\t? streams.filter((x) => x != null)\n\t\t\t\t: streams;\n\t\t\tnode.srcObject = new MediaStream(streams);\n\t\t}\n\t\treturn {\n\t\t\tupdate(nextStreams) {\n\t\t\t\tif (nextStreams != null) {\n\t\t\t\t\tnextStreams = Array.isArray(nextStreams)\n\t\t\t\t\t\t? nextStreams.filter((x) => x != null)\n\t\t\t\t\t\t: nextStreams;\n\t\t\t\t\tnode.srcObject = new MediaStream(nextStreams);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdestroy() {\n\t\t\t\t/* stream revoking logic here */\n\t\t\t},\n\t\t};\n\t}\n\n\tfunction chooseWhich(stream) {\n\t\tif (mainStreamId == stream.id) {\n\t\t\tif (stream.videoStreams.length == 1) {\n\t\t\t\treturn [...stream.videoStreams, ...stream.audioStreams];\n\t\t\t}\n\t\t\treturn [...stream.videoStreams.slice(1), ...stream.audioStreams];\n\t\t}\n\t\treturn [...stream.videoStreams, ...stream.audioStreams];\n\t}\n</script>\n\n<style>\n\tdiv.container {\n\t\tborder-radius: 10px;\n\t\t/* border: 1px solid rgb(100, 100, 100); */\n\t\tbackground-color: rgb(200, 200, 200);\n\t\tmargin: 5px 5px;\n\t\tpadding: 10px 20px;\n\t}\n\t.video-outer > img {\n\t\twidth: 66%;\n\t}\n\t.video-outer {\n\t\tposition: relative;\n\t\tdisplay: inline-block; /* shrink wrap */\n\t\twidth: 100%;\n\t\theight: auto;\n\t}\n\t.video-contents {\n\t\t/* match size of .container, without influencing it */\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbackground-color: rgb(50, 50, 50);\n\t}\n\tvideo {\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\t-ms-transform: translate(-50%, -50%);\n\t}\n\t.icon {\n\t\tdisplay: inline-block;\n\t\tcolor: white;\n\t\twidth: 16px;\n\t\theight: 16px;\n\t\tmargin-top: auto;\n\t\tmargin-bottom: auto;\n\t\tmargin-right: 10px;\n\t}\n\t.icon-button {\n\t\tdisplay: flex;\n\t\talign-content: center;\n\t}\n</style>\n\n<svelte:head>\n\t<script\n\t\tsrc=\"//media.twiliocdn.com/sdk/js/video/releases/2.7.2/twilio-video.min.js\">\n\t</script>\n</svelte:head>\n\n<div>\n\t{#if joinPromise == null}\n\t\t<button class=\"icon-button\" on:click={initialize}><div class=\"icon\">\n\t\t\t\t<IoMdCall />\n\t\t\t</div>Start Call</button>\n\t{:else}\n\t\t{#await joinPromise}\n\t\t\t<p>Connecting...</p>\n\t\t{:then room}\n\t\t\t{#if streams.length <= 4}\n\t\t\t\t<style>\n\t\t\t\t\t.mainVideo {\n\t\t\t\t\t\tflex: 4;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t{:else}\n\t\t\t\t<style>\n\t\t\t\t\t.mainVideo {\n\t\t\t\t\t\tflex: 2;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t{/if}\n\t\t\t<div style=\"display: flex; height: 100%\">\n\t\t\t\t<div class=\"mainVideo\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle=\"display: flex; flex-direction: column; height: 100%; margin-right: 10px\">\n\t\t\t\t\t\t<div class=\"container\" style=\"width: 100%; \">\n\t\t\t\t\t\t\t<div class=\"video-outer\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n\t\t\t\t\t\t\t\t\talt=\"backing\" />\n\t\t\t\t\t\t\t\t<div class=\"video-contents\">\n\t\t\t\t\t\t\t\t\t{#if mainStreamPinned}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"position: absolute; top: 0; right: 0; z-index: 10\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tmainStreamId = null;\n\t\t\t\t\t\t\t\t\t\t\t\tmainStream = null;\n\t\t\t\t\t\t\t\t\t\t\t\tmainStreamPinned = false;\n\t\t\t\t\t\t\t\t\t\t\t}}>Unpin</button>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t<video\n\t\t\t\t\t\t\t\t\t\tuse:srcObject={[mainStream]}\n\t\t\t\t\t\t\t\t\t\tautoplay>\n\t\t\t\t\t\t\t\t\t\t<track kind=\"captions\" />\n\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"container\"\n\t\t\t\t\t\t\tstyle=\"flex: 1; display: flex; overflow: hidden; width: 100%\">\n\t\t\t\t\t\t\t<div style=\"flex: 1; margin-right: 20px;\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"video-outer\"\n\t\t\t\t\t\t\t\t\tstyle=\"max-height: 25vh\">\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n\t\t\t\t\t\t\t\t\t\talt=\"backing\"\n\t\t\t\t\t\t\t\t\t\tstyle=\"max-height: 25vh\" />\n\t\t\t\t\t\t\t\t\t<div class=\"video-contents\">\n\t\t\t\t\t\t\t\t\t\t<video\n\t\t\t\t\t\t\t\t\t\t\tautoplay\n\t\t\t\t\t\t\t\t\t\t\tuse:srcObject={localStream.screenStream != null ? [localStream.screenStream, localStream.videoStream] : [localStream.videoStream, localStream.audioStream]}\n\t\t\t\t\t\t\t\t\t\t\tmuted>\n\t\t\t\t\t\t\t\t\t\t\t<track kind=\"captions\" />\n\t\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"height: 100%; position: absolute; top: 0; left: 0\">\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"backing\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"height: 100%\" />\n\t\t\t\t\t\t\t\t\t\t\t<meter\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\t\t\t\tmax=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"transform: rotate(-90deg); transform-origin: bottom left; width: 100%; position: absolute; bottom: 0; left: 0\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={localStream.id in volumes ? volumes[localStream.id] : 0} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style=\"display: flex; flex-direction: column\">\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\tbutton {\n\t\t\t\t\t\t\t\t\t\tmargin: 2px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style><button\n\t\t\t\t\t\t\t\t\tclass=\"icon-button\"\n\t\t\t\t\t\t\t\t\ton:click={toggleMute}>{#if muted}\n\t\t\t\t\t\t\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t\t\t\t\t\t\t<IoIosVolumeHigh />\n\t\t\t\t\t\t\t\t\t\t</div>Unmute\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t\t\t\t\t\t\t<IoIosVolumeOff />\n\t\t\t\t\t\t\t\t\t\t</div>Mute\n\t\t\t\t\t\t\t\t\t{/if}</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"icon-button\"\n\t\t\t\t\t\t\t\t\ton:click={toggleVideo}>{#if videoHidden}\n\t\t\t\t\t\t\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t\t\t\t\t\t\t<IoMdEye />\n\t\t\t\t\t\t\t\t\t\t</div>Show video\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t\t\t\t\t\t\t<IoMdEyeOff />\n\t\t\t\t\t\t\t\t\t\t</div>Stop video\n\t\t\t\t\t\t\t\t\t{/if}</button>\n\t\t\t\t\t\t\t\t{#if streams.length == 0}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"icon-button\"\n\t\t\t\t\t\t\t\t\t\ton:click={endCall}><div class=\"icon\">\n\t\t\t\t\t\t\t\t\t\t\t<IoMdCall />\n\t\t\t\t\t\t\t\t\t\t</div>{#if room == null}\n\t\t\t\t\t\t\t\t\t\t\tStart Call\n\t\t\t\t\t\t\t\t\t\t{:else}End Call{/if}</button>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<Confirm let:confirm={confirmThis}>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"icon-button\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => confirmThis(endCall)}><div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<IoMdCall />\n\t\t\t\t\t\t\t\t\t\t\t</div>{#if room == null}\n\t\t\t\t\t\t\t\t\t\t\t\tStart Call\n\t\t\t\t\t\t\t\t\t\t\t{:else}End Call{/if}</button>\n\n\t\t\t\t\t\t\t\t\t\t<span slot=\"title\"> End Call </span>\n\t\t\t\t\t\t\t\t\t\t<span slot=\"description\">\n\t\t\t\t\t\t\t\t\t\t\tAre you sure you want to end the\n\t\t\t\t\t\t\t\t\t\t\tcall?\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</Confirm>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"icon-button\"\n\t\t\t\t\t\t\t\t\ton:click={shareScreen}>\n\t\t\t\t\t\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t\t\t\t\t\t<IoIosShare />\n\t\t\t\t\t\t\t\t\t</div>{#if localStream.screenStream != null}\n\t\t\t\t\t\t\t\t\t\tUnshare screen\n\t\t\t\t\t\t\t\t\t{:else}Share screen{/if}</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"sub container\"\n\t\t\t\t\tstyle=\"flex: 1; display: flex; flex-wrap: wrap; align-content: flex-start;\">\n\t\t\t\t\t{#each streams as stream (stream.id)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"remote\"\n\t\t\t\t\t\t\tstyle=\"position: relative; margin-bottom: 10px;\">\n\t\t\t\t\t\t\t{#if streams.length <= 4}\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t.remote {\n\t\t\t\t\t\t\t\t\t\tflex-basis: 100%;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t.remote {\n\t\t\t\t\t\t\t\t\t\tflex-basis: 40%;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t<div class=\"video-outer\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n\t\t\t\t\t\t\t\t\talt=\"backing\" />\n\t\t\t\t\t\t\t\t<div class=\"video-contents\">\n\t\t\t\t\t\t\t\t\t<video\n\t\t\t\t\t\t\t\t\t\tuse:srcObject={chooseWhich(stream)}\n\t\t\t\t\t\t\t\t\t\tautoplay>\n\t\t\t\t\t\t\t\t\t\t<track kind=\"captions\" /></video>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle=\"height: 100%; position: absolute; top: 0; left: 0\">\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n\t\t\t\t\t\t\t\t\t\t\talt=\"backing\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"height: 100%\" />\n\t\t\t\t\t\t\t\t\t\t<meter\n\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\t\t\tmax=\"0.3\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"transform: rotate(-90deg); transform-origin: bottom left; width: 100%; position: absolute; bottom: 0; left: 0\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={stream.id in volumes ? volumes[stream.id] : 0} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle=\"position: absolute; top: 0; right: 0; background-color: rgba(0, 0, 0, 0.2); display: flex; justify-content: center;\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tstyle=\"color: white; margin: auto 5px;\">{stream.id}</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tstyle=\"padding: 0 10px; display: flex; justify-content: center\"\n\t\t\t\t\t\t\t\t\ttitle=\"Click to maximise video\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tbuttonClickAudio.play();\n\t\t\t\t\t\t\t\t\t\tif (stream.videoStreams.length >= 1) {\n\t\t\t\t\t\t\t\t\t\t\tmainStreamPinned = true;\n\t\t\t\t\t\t\t\t\t\t\tmainStreamId = stream.id;\n\t\t\t\t\t\t\t\t\t\t\tmainStream = stream.videoStreams[0].clone();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}><div\n\t\t\t\t\t\t\t\t\t\tclass=\"icon\"\n\t\t\t\t\t\t\t\t\t\tstyle=\"margin-right: 0\">\n\t\t\t\t\t\t\t\t\t\t<IoIosExpand />\n\t\t\t\t\t\t\t\t\t</div></button>\n\t\t\t\t\t\t\t\t{#if stream.videoStreams.length > 1}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tstyle=\"padding: 0 10px; display: flex; justify-content: center\"\n\t\t\t\t\t\t\t\t\t\ttitle=\"Switch between screen share and camera\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tbuttonClickAudio.play();\n\t\t\t\t\t\t\t\t\t\t\tstream.videoStreams = [...stream.videoStreams.slice(1), ...stream.videoStreams.slice(0, 1)];\n\t\t\t\t\t\t\t\t\t\t\tif (mainStreamId == stream.id) {\n\t\t\t\t\t\t\t\t\t\t\t\tmainStream = stream.videoStreams[0].clone();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tstreams = streams;\n\t\t\t\t\t\t\t\t\t\t}}><div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"margin-right: 0\">\n\t\t\t\t\t\t\t\t\t\t\t<IoMdSwap />\n\t\t\t\t\t\t\t\t\t\t</div></button>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:catch error}\n\t\t\t<p>Failed to join room: {error.message}</p>\n\t\t{/await}\n\t{/if}\n</div>\n"
  ],
  "names": [],
  "mappings": "AAwFA,cAAc,eAAC,CAAC,AACd,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,CAChB,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CACtB,WAAW,CAAE,GAAG,AAClB,CAAC,AAED,oBAAoB,eAAC,CAAC,AACpB,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CACtB,WAAW,CAAE,GAAG,AAClB,CAAC,AAED,QAAQ,eAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,QAAQ,CACzB,MAAM,CAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CACxB,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,aAAa,CAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,AAC5B,CAAC,AAED,eAAe,eAAC,CAAC,AACf,WAAW,CAAE,UAAU,CACvB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,GAAG,CACZ,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,CAChC,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CACxB,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AACpE,CAAC,AAED,QAAQ,eAAC,CAAC,AACR,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,KAAK,CACf,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,GAAG,CACZ,UAAU,CAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,AAClC,CAAC,AAED,eAAe,eAAC,CAAC,AACf,UAAU,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC9B,UAAU,CAAE,IAAI,gBAAgB,CAAC,CACjC,WAAW,CAAE,IAAI,CACjB,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,MAAM,CAAE,OAAO,CACf,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CACtB,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,AACpD,CAAC,AAED,8BAAe,MAAM,AAAC,CAAC,AACrB,UAAU,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC9B,UAAU,CAAE,IAAI,sBAAsB,CAAC,AACzC,CAAC,AAED,cAAc,eAAC,CAAC,AACd,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,WAAW,CACvB,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,MAAM,CAAE,OAAO,CACf,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACzB,KAAK,CAAE,IAAI,kBAAkB,CAAC,CAC9B,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,AACpD,CAAC,AAED,6BAAc,MAAM,AAAC,CAAC,AACpB,KAAK,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACzB,KAAK,CAAE,IAAI,wBAAwB,CAAC,AACtC,CAAC;ACtKC,GAAG,cAAC,CAAC,AACH,MAAM,CAAE,YAAY,CACpB,IAAI,CAAE,YAAY,CAClB,YAAY,CAAE,CAAC,CACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,AAClB,CAAC;AC4XF,GAAG,UAAU,8BAAC,CAAC,AACd,aAAa,CAAE,IAAI,CAEnB,gBAAgB,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACpC,MAAM,CAAE,GAAG,CAAC,GAAG,CACf,OAAO,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AACD,2BAAY,CAAG,GAAG,eAAC,CAAC,AACnB,KAAK,CAAE,GAAG,AACX,CAAC,AACD,YAAY,8BAAC,CAAC,AACb,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,YAAY,CACrB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACb,CAAC,AACD,eAAe,8BAAC,CAAC,AAEhB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,gBAAgB,CAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,AAClC,CAAC,AACD,KAAK,8BAAC,CAAC,AACN,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,CAChB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,CAChC,aAAa,CAAE,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,AACrC,CAAC,AACD,KAAK,8BAAC,CAAC,AACN,OAAO,CAAE,YAAY,CACrB,KAAK,CAAE,KAAK,CACZ,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,IAAI,CACnB,YAAY,CAAE,IAAI,AACnB,CAAC,AACD,YAAY,8BAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,MAAM,AACtB,CAAC"
}